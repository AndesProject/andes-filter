---
alwaysApply: true
description: "Reglas completas para commits siguiendo Conventional Commits en espa√±ol con enfoque en valor al usuario"
triggers: ["commit", "git", "message", "conventional", "sparkle", "‚ú®", "commit-message", "generate", "auto", "@conventional-commits.mdc", "conventional-commits"]
priority: 1
autoActivate: true
context: ["source-control", "commit", "git", "sparkle", "ai-assistant"]
cursorBehavior: "intervene-immediately"
---

# üéØ Reglas para Commits (Conventional en Espa√±ol) - Cursor AI

## üéØ Formato obligatorio

Todos los commits deben seguir este formato:

```
<tipo>(<√°rea>): <mensaje en presente y en espa√±ol>

<cuerpo detallado con vi√±etas explicando cambios t√©cnicos>
```

### Estructura requerida:
- **tipo**: uno de los tipos permitidos (ver lista abajo)
- **√°rea**: m√≥dulo, funcionalidad o secci√≥n afectada (opcional)
- **mensaje**: descripci√≥n corta, clara, en espa√±ol y enfocada en el valor para el usuario
- **cuerpo**: lista detallada de cambios t√©cnicos espec√≠ficos realizados (opcional pero recomendado para commits complejos)

## ‚úÖ Tipos permitidos (Conventional Commits)

**NOTA**: Los tipos permitidos se leen autom√°ticamente desde commitlint.config.js como fuente de verdad.

| Tipo | Descripci√≥n | Cu√°ndo usar | Ejemplo con valor |
|------|-------------|-------------|-------------------|
| `feat` | nueva funcionalidad que aporta valor al usuario | Agregar componentes, hooks, servicios nuevos | feat: permite a usuarios guardar cursos favoritos |
| `fix` | correcci√≥n de error que afectaba la experiencia | Corregir bugs, errores de l√≥gica, problemas de UI | fix: corrige error que imped√≠a login en m√≥viles |
| `refactor` | reestructuraci√≥n de c√≥digo sin cambiar comportamiento visible | Mejorar arquitectura, aplicar principios SOLID, DRY | refactor: simplifica validaci√≥n de formularios |
| `perf` | mejora de rendimiento percibida por el usuario | Optimizar renders, reducir bundle size, mejorar tiempos | perf: reduce tiempo de carga del cat√°logo en 60% |
| `docs` | cambios en documentaci√≥n que mejoran uso o mantenimiento | Actualizar README, comentarios t√©cnicos, tipos | docs: actualiza gu√≠a de instalaci√≥n para Windows |
| `style` | ajustes de estilo/c√≥digo sin afectar la l√≥gica | Formateo, ESLint fixes, cambios de estilo visual | style: mejora legibilidad de textos en modo oscuro |
| `test` | incorporaci√≥n o mejora de pruebas | Agregar tests unitarios, mejorar cobertura | test: a√±ade pruebas unitarias para hooks de autenticaci√≥n |
| `chore` | tareas internas o de mantenimiento | Actualizar dependencias, configuraciones | chore: actualiza react a versi√≥n 18.2.0 |
| `build` | cambios en la configuraci√≥n de build o dependencias | Webpack, TypeScript, herramientas de desarrollo | build: optimiza configuraci√≥n de webpack para producci√≥n |
| `ci` | cambios en integraci√≥n continua | Pipelines, workflows, automatizaci√≥n | ci: a√±ade validaci√≥n de tipos en pipeline |
| `revert` | revertir un commit previo | Deshacer cambios problem√°ticos | revert: revierte cambios en autenticaci√≥n por problemas de seguridad |

## üß† Filosof√≠a del Mensaje con Valor

### Enfoque en el "Por qu√©" no en el "Qu√©"
- ‚ùå fix: corrige error en validaci√≥n de formulario
- ‚úÖ fix: permite a usuarios completar registro sin errores

### Comunicar el beneficio del usuario
- ‚ùå feat: a√±ade componente de b√∫squeda
- ‚úÖ feat: permite encontrar contenido r√°pidamente desde cualquier p√°gina

### Usar lenguaje que cualquier miembro del equipo entienda
- ‚ùå refactor: implementa patr√≥n repository en capa de datos
- ‚úÖ refactor: mejora velocidad de carga de cat√°logo de cursos

## üìè Reglas estrictas (Compatible con commitlint)

### Formato del mensaje:
- **type**: obligatorio, en min√∫scula, y solo de la lista permitida (le√≠da desde commitlint.config.js)
- **scope (√°rea)**: opcional, en lower-case, camelCase o kebab-case (validado desde commitlint.config.js)
- **subject (mensaje corto)**:
  - Debe estar en espa√±ol
  - Usar presente (ejemplo: a√±ade, corrige, mejora, simplifica, permite)
  - L√≠mites din√°micos le√≠dos desde commitlint.config.js (subject-min-length, subject-max-length)
  - Sin may√∫scula inicial (a menos que sea un nombre propio)
  - Sin punto final
  - header completo (type + scope + subject): l√≠mite desde commitlint.config.js (header-max-length)
  - **CONFIGURACI√ìN DIN√ÅMICA**: Se lee autom√°ticamente desde commitlint.config.js

### Idioma preferido:
- Se prefiere espa√±ol para mejor comprensi√≥n del equipo
- Se acepta ingl√©s si el mensaje explica claramente el valor para el usuario
- El enfoque debe estar en el beneficio para el usuario, no en el idioma

## üéØ Reglas para Generar Mensajes con Valor

### 1. Siempre pensar en el usuario final
- ¬øQu√© problema resuelve esto?
- ¬øC√≥mo mejora la experiencia?
- ¬øQu√© beneficio obtiene el usuario?

### 2. Usar verbos de acci√≥n claros
- ‚úÖ permite, mejora, corrige, simplifica, optimiza
- ‚ùå a√±ade, actualiza, modifica, cambia

### 3. Incluir contexto del impacto
- ‚úÖ mejora velocidad de b√∫squeda en cat√°logo
- ‚ùå optimiza query de b√∫squeda

### 4. Ser espec√≠fico sobre el beneficio
- ‚úÖ reduce tiempo de carga de p√°gina en 3 segundos
- ‚ùå mejora rendimiento

## üìù Formato de Cuerpo Detallado

### Cu√°ndo usar cuerpo detallado:
- Commits que modifican m√∫ltiples archivos
- Refactorizaciones complejas
- Nuevas funcionalidades con m√∫ltiples componentes
- Cambios que requieren explicaci√≥n t√©cnica adicional

### Estructura del cuerpo:
```
<tipo>(<√°rea>): <mensaje principal>

- <Cambio espec√≠fico 1 con contexto t√©cnico>.
- <Cambio espec√≠fico 2 con contexto t√©cnico>.
- <Cambio espec√≠fico 3 con contexto t√©cnico>.
```

### Reglas para el cuerpo:
- Cada vi√±eta debe empezar con verbo en presente (a√±ade, elimina, reemplaza, actualiza, etc.)
- Incluir contexto t√©cnico espec√≠fico (nombres de funciones, clases, archivos)
- Explicar el "por qu√©" t√©cnico de cada cambio
- M√°ximo 4-5 vi√±etas por commit
- Cada vi√±eta debe ser una oraci√≥n completa terminada en punto

## üîç Detecci√≥n Autom√°tica de Impacto

### Para nuevos archivos/componentes:
- Identificar la funcionalidad principal
- Enfocarse en qu√© problema resuelve para el usuario
- Ejemplo: `feat(catalog): permite filtrar cursos por categor√≠a y duraci√≥n`

### Para correcciones:
- Identificar qu√© problema ten√≠a el usuario
- Explicar c√≥mo se soluciona
- Ejemplo: `fix(auth): permite login con email en min√∫sculas`

### Para mejoras de rendimiento:
- Cuantificar la mejora cuando sea posible
- Explicar el beneficio percibido
- Ejemplo: `perf(images): reduce tiempo de carga de im√°genes en 40%`

## üü¢ Ejemplos v√°lidos

### Ejemplo b√°sico (solo header):
```
feat(auth): a√±ade autenticaci√≥n de usuario con sanctum
fix(api): corrige error que imped√≠a crear usuarios desde m√≥vil
docs(readme): actualiza pasos de instalaci√≥n para linux
refactor(cuestionario): simplifica validaci√≥n de respuestas
perf(video): mejora tiempos de carga en lecciones grabadas
style(components): aplica formato consistente con prettier
test(hooks): a√±ade pruebas unitarias para use-form
chore(deps): actualiza react a versi√≥n 18.2.0
build(webpack): optimiza configuraci√≥n para producci√≥n
ci(pipeline): a√±ade validaci√≥n de tipos en build
```

### Ejemplo completo (header + cuerpo detallado):
```
refactor(competence): optimiza obtenci√≥n de temas y elimina c√≥digo obsoleto

- Reemplaza la l√≥gica de obtenci√≥n de temas en el componente Competence con una llamada directa a getCompetenceIconTheme.
- Elimina la funci√≥n obsoleta getTheme y los datos competenceThemeData asociados.
- Actualiza imports para incluir competence.service mejorando la modularidad.
- Limpia CompetenceModel y clases relacionadas utilizando CompetenceThemeByName para determinar estilos, mejorando claridad y mantenibilidad del c√≥digo.
```

### Ejemplo de feat con cuerpo:
```
feat(search): permite b√∫squeda avanzada con filtros m√∫ltiples

- Implementa componente FilterPanel con filtros por categor√≠a, duraci√≥n y nivel.
- A√±ade hook useAdvancedSearch para manejar estado de filtros complejos.
- Integra debounce en b√∫squeda para optimizar rendimiento.
- Actualiza API service para soportar par√°metros de filtrado m√∫ltiple.
```

## üî¥ Ejemplos inv√°lidos

```
feat: add auth (muy corto y en ingl√©s)
FEAT: add authentication (may√∫sculas y en ingl√©s)
feat(Auth): add authentication (scope en PascalCase)
feat(auth): Add user authentication with sanctum (empieza con may√∫scula e ingl√©s)
feat: a√±ade auth (mensaje demasiado corto)
```

## üìã Checklist para Mensaje con Valor

Antes de generar el commit, verificar:

- [ ] ¬øEl mensaje explica el beneficio para el usuario?
- [ ] ¬øCualquier miembro del equipo entender√≠a el impacto?
- [ ] ¬øEl mensaje est√° en espa√±ol y es claro?
- [ ] ¬øSe evita jerga t√©cnica innecesaria?
- [ ] ¬øEl mensaje comunica el "por qu√©" del cambio?
- [ ] ¬øCumple con el formato de commitlint?

## üö´ Evitar en Mensajes de Commit

- Detalles t√©cnicos innecesarios
- Jerga de programaci√≥n
- Referencias a archivos espec√≠ficos
- Cambios internos sin impacto visible
- Mensajes gen√©ricos como actualiza c√≥digo
- T√©rminos en ingl√©s

## üéØ Verbos Recomendados para Valor al Usuario

**Verbos que explican beneficio al usuario (espa√±ol e ingl√©s):**

### Enfoque en el usuario:
- **permite/enable** - permite al usuario hacer algo
- **facilita/facilitate** - hace m√°s f√°cil una tarea
- **mejora/improve** - mejora la experiencia del usuario
- **optimiza/optimize** - hace m√°s eficiente el proceso
- **corrige/fix** - soluciona un problema del usuario
- **simplifica/simplify** - reduce la complejidad para el usuario
- **reduce/reduce** - disminuye tiempo/esfuerzo del usuario
- **aumenta/increase** - incrementa beneficios para el usuario
- **habilita/enable** - permite nueva funcionalidad
- **deshabilita/disable** - previene errores del usuario

### Evitar enfoque puramente t√©cnico:
- ‚ùå a√±ade componente ‚Üí ‚úÖ permite filtrar contenido
- ‚ùå actualiza API ‚Üí ‚úÖ mejora velocidad de carga
- ‚ùå corrige bug ‚Üí ‚úÖ corrige error que imped√≠a guardar

## üéØ Validaci√≥n con commitlint.config.js

**FUENTE DE VERDAD**: Esta regla lee autom√°ticamente el archivo commitlint.config.js como fuente √∫nica de configuraci√≥n

### Lectura autom√°tica de configuraci√≥n:
1. **LEER** commitlint.config.js al activar la regla
2. **EXTRAER** tipos permitidos del array type-enum
3. **OBTENER** l√≠mites de caracteres de subject-min-length, subject-max-length, header-max-length
4. **VALIDAR** casos de scope permitidos
5. **APLICAR** configuraci√≥n en tiempo real sin duplicaci√≥n

### Configuraci√≥n din√°mica:
- **types**: Se leen desde commitlint.config.js rules['type-enum'][2]
- **scope-case**: Se leen desde commitlint.config.js rules['scope-case'][2]
- **subject-min-length**: Se lee desde commitlint.config.js rules['subject-min-length'][2]
- **subject-max-length**: Se lee desde commitlint.config.js rules['subject-max-length'][2]
- **header-max-length**: Se lee desde commitlint.config.js rules['header-max-length'][2]

## üö® Aplicaci√≥n Autom√°tica para Cursor AI

**TRIGGERS DE ACTIVACI√ìN**: Esta regla se activa autom√°ticamente cuando el usuario:
- Menciona "commit", "git", "message" o "conventional"
- Escribe un mensaje de commit
- Solicita ayuda con commits
- Tiene cambios staged para commit
- **HACE CLIC EN EL √çCONO SPARKLE (‚ú®) en el campo de commit message**
- Est√° en el panel Source Control de Cursor

**COMPORTAMIENTO OBLIGATORIO**: Cuando se active esta regla:

1. **INTERVENIR INMEDIATAMENTE** - No esperar a que el usuario termine
2. **VALIDAR EN TIEMPO REAL** - Revisar cada mensaje mientras se escribe
3. **SUGERIR FORMATO CORRECTO** - Mostrar ejemplo espec√≠fico del tipo de commit
4. **EXPLICAR BENEFICIO AL USUARIO** - Enfocarse en el valor, no en la implementaci√≥n
5. **PREFERIR ESPA√ëOL** - Aceptar ingl√©s solo si explica claramente el valor
6. **SINCRONIZAR CON commitlint.config.js** - Respetar l√≠mites exactos (100 chars)
7. **MOSTRAR CHECKLIST** - Verificar cada punto antes de aprobar
8. **CORREGIR AUTOM√ÅTICAMENTE** - No solo sugerir, sino aplicar la correcci√≥n

## ‚ú® Comportamiento Espec√≠fico del √çcono Sparkle

**ACTIVACI√ìN AUTOM√ÅTICA**: Esta regla se activa autom√°ticamente cuando el usuario hace clic en el √≠cono sparkle (‚ú®) en el campo de commit message.

**CUANDO EL USUARIO HAGA CLIC EN EL √çCONO SPARKLE (‚ú®)**:

1. **ANALIZAR CAMBIOS STAGED** - Revisar qu√© archivos est√°n en staging
2. **DETECTAR TIPO DE COMMIT** - Identificar si es feat, fix, refactor, etc.
3. **GENERAR MENSAJE AUTOM√ÅTICO** - Crear mensaje siguiendo las reglas
4. **APLICAR FORMATO CORRECTO** - Insertar en el campo de commit message
5. **VALIDAR CONTRA commitlint** - Asegurar compatibilidad

**COMANDO ESPEC√çFICO PARA SPARKLE Y LLAMADA DIRECTA**:
```
CUANDO SE LLAME ESTA REGLA (@conventional-commits.mdc) O SE USE EL SPARKLE:

1. LEER commitlint.config.js como fuente de verdad
2. EXTRAER configuraci√≥n real: types, l√≠mites, scope-case
3. ANALIZAR cambios staged identificando archivos y modificaciones
4. DETECTAR tipo de commit basado en archivos modificados
5. GENERAR mensaje usando configuraci√≥n REAL de commitlint:
   - Formato: <tipo>(<√°rea>): <mensaje en espa√±ol>
   - Types: desde commitlint.config.js rules['type-enum'][2]
   - L√≠mites: desde commitlint.config.js (subject-min/max-length, header-max-length)
   - Scope: desde commitlint.config.js rules['scope-case'][2]
   - Cuerpo: lista detallada de cambios t√©cnicos si el commit es complejo
6. MOSTRAR: Mensaje generado listo para copiar
7. ENFOCARSE EN EL VALOR: Cada cambio debe explicar qu√© beneficio obtiene el usuario
```

### Ejemplo de funcionamiento del sparkle:
```
Usuario hace clic en ‚ú®
Cursor analiza: 5 archivos modificados en competence-plan
Cursor detecta: feat (nuevas propiedades a√±adidas)
Cursor genera mensaje enfocado en valor:
feat(competence-plan): permite a usuarios ver su progreso en competencias

- A√±ade propiedades de progreso a CompetenceModel para tracking de avance.
- Implementa c√°lculo autom√°tico de porcentaje completado.
- Actualiza componentes para mostrar indicadores visuales de progreso.
- Integra validaci√≥n de competencias completadas.

Cursor muestra: El mensaje est√° listo para copiar
```

### Ejemplo de intervenci√≥n autom√°tica:
```
Usuario escribe: fix bug in login
AI responde: Este mensaje no sigue las reglas.
Formato correcto: fix(auth): permite a usuarios iniciar sesi√≥n sin errores de validaci√≥n
Enf√≥cate en qu√© problema resuelve para el usuario, no en la implementaci√≥n t√©cnica.
```

### Ejemplo de intervenci√≥n para ingl√©s:
```
Usuario escribe: feat(home.context): enhance content loading and selection logic
AI responde: Mensaje v√°lido en ingl√©s.
Sugerencia en espa√±ol: refactor(home-context): reduce tiempo de carga al navegar por planes
El mensaje explica claramente el beneficio para el usuario.
```

### Ejemplo de intervenci√≥n para mensaje t√©cnico:
```
Usuario escribe: feat: a√±ade componente de b√∫squeda
AI responde: Enfoque t√©cnico sin valor para el usuario.
Formato correcto: feat(search): permite encontrar contenido r√°pidamente desde cualquier p√°gina
Enf√≥cate en qu√© problema resuelve para el usuario, no en la implementaci√≥n.
```

## üîß Instrucciones para Cursor AI

**CUANDO EL USUARIO ESCRIBA UN COMMIT O USE EL SPARKLE**:

1. **ACTIVAR INMEDIATAMENTE** esta regla
2. **VALIDAR** contra commitlint.config.js
3. **INTERVENIR** si no cumple las reglas
4. **SUGERIR** formato correcto con beneficio al usuario
5. **APLICAR** la correcci√≥n autom√°ticamente
6. **VERIFICAR** que pase commitlint antes de aprobar

**CONFIGURACI√ìN ESPEC√çFICA PARA SPARKLE Y LLAMADA DIRECTA**:
- **Lectura autom√°tica**: Leer commitlint.config.js como fuente √∫nica de configuraci√≥n
- **Detecci√≥n autom√°tica**: Analizar archivos staged para determinar tipo de commit
- **Generaci√≥n inteligente**: Crear mensaje basado en cambios reales usando configuraci√≥n real
- **Validaci√≥n en tiempo real**: Verificar formato usando l√≠mites exactos de commitlint
- **Fallback manual**: Si no se puede determinar autom√°ticamente, sugerir opciones
- **Llamada directa**: Cuando se mencione @conventional-commits.mdc, ejecutar inmediatamente el an√°lisis

**EJECUCI√ìN INMEDIATA AL LLAMAR LA REGLA**:
```
Al detectar @conventional-commits.mdc:
1. LEER commitlint.config.js (fuente de verdad)
2. EXTRAER configuraci√≥n: types, l√≠mites, scope-case
3. ANALIZAR cambios staged identificando archivos y modificaciones
4. Generar mensaje autom√°tico con l√≠mites exactos de commitlint:
   - Si hay m√∫ltiples archivos modificados: incluir cuerpo detallado
   - Si es un cambio simple: solo header
   - Cada vi√±eta del cuerpo debe explicar el cambio t√©cnico y su valor para el usuario
5. MOSTRAR mensaje final listo para usar
6. ENFOCARSE: cada cambio debe explicar qu√© beneficio percibe el usuario
```

## ü§ñ Generaci√≥n Autom√°tica Inteligente

### Algoritmo de detecci√≥n de complejidad:
1. **Contar archivos modificados**: Si > 3 archivos ‚Üí usar cuerpo detallado
2. **Analizar tipos de cambios**:
   - Nuevos archivos + modificaciones ‚Üí cuerpo detallado
   - Solo modificaciones menores ‚Üí solo header
3. **Detectar patrones**:
   - Refactor + m√∫ltiples archivos ‚Üí cuerpo detallado
   - Fix + un archivo ‚Üí solo header
   - Feat + nuevos componentes ‚Üí cuerpo detallado

### Plantillas de generaci√≥n:

#### Para refactor con cuerpo:
```
refactor(<√°rea>): <beneficio principal>

- <acci√≥n espec√≠fica 1> en <contexto t√©cnico>.
- <acci√≥n espec√≠fica 2> en <contexto t√©cnico>.
- <acci√≥n espec√≠fica 3> mejorando <beneficio t√©cnico>.
```

#### Para feat con cuerpo:
```
feat(<√°rea>): <funcionalidad que permite al usuario>

- Implementa <componente/servicio> con <funcionalidad espec√≠fica>.
- A√±ade <hook/funci√≥n> para <prop√≥sito t√©cnico>.
- Integra <tecnolog√≠a/m√©todo> para <beneficio de rendimiento>.
- Actualiza <archivo/modelo> para <mejora espec√≠fica>.
```

## üéØ Resultado Esperado

Cada commit debe contar una historia clara de c√≥mo el cambio mejora la experiencia del usuario o facilita el trabajo del equipo, siguiendo el est√°ndar Conventional Commits y siendo compatible con commitlint.

## üéØ Responsabilidades de la Regla

**√öNICA RESPONSABILIDAD:**
- Analizar los cambios staged en git
- Generar un mensaje de commit bien formado enfocando en el valor entregado al usuario
- Mostrar el mensaje listo para copiar y usar
- No usar comillas dobles en ning√∫n mensaje generado

**PROHIBICIONES ABSOLUTAS:**
- ‚ùå NO ejecutar git commit -m ni ning√∫n comando de git
- ‚ùå NO ejecutar comandos git (commit, push, merge, add, etc.)
- ‚ùå NO preguntar si se debe ejecutar git commit
- ‚ùå NO tomar decisiones sobre cu√°ndo hacer commit
- ‚ùå NO modificar el historial de git
- ‚ùå NO usar comillas dobles en mensajes de commit

El usuario tiene control total sobre cu√°ndo y c√≥mo usar el mensaje generado.